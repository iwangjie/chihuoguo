# ğŸ”¥ ç½‘é¡µç‰ˆæ¨¡æ‹Ÿæ¶®ç«é”…æ¸¸æˆ

åŸºäº Cloudflare Workers + Durable Objects çš„å¤šäººåœ¨çº¿ç«é”…æ¸¸æˆï¼Œæ”¯æŒæœ€å¤š 7 äººåŒæ—¶åœ¨çº¿ï¼Œä½“éªŒçœŸå®çš„é‡åº†è€ç«é”…æ–‡åŒ–ï¼

## âœ¨ æ¸¸æˆç‰¹æ€§

- ğŸ² **é‡åº†è€ç«é”…ä¸»é¢˜**: é¸³é¸¯é”…è®¾è®¡ï¼Œéº»è¾£é”… + æ¸…æ±¤é”…
- ğŸ‘¥ **å¤šäººåœ¨çº¿**: æ”¯æŒ 2-7 äººåŒæ—¶æ¸¸æˆ
- âš¡ **å®æ—¶åŒæ­¥**: æ‰€æœ‰æ“ä½œå®æ—¶åŒæ­¥ç»™åŒæ¡Œç©å®¶
- ğŸ¥˜ **ä¸°å¯Œèœå“**: 6å¤§ç±»åˆ«ï¼Œ40+ ç§èœå“
- â° **çœŸå®æ¶®ç…®**: ä¸åŒèœå“æœ‰ä¸åŒçš„çƒ¹é¥ªæ—¶é—´
- ğŸ’¬ **å¿«æ·å–Šè¯**: é‡åº†è¯ç‰¹è‰²ï¼Œå¢å¼ºç¤¾äº¤äº’åŠ¨
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Vue.js 3 (Composition API)
- **åç«¯**: Cloudflare Workers + Durable Objects
- **å­˜å‚¨**: Durable Object Storage API
- **å®æ—¶é€šä¿¡**: WebSocket
- **éƒ¨ç½²**: Cloudflare Edge Network

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    WebSocket     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å®¢æˆ·ç«¯ (Vue)   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Cloudflare      â”‚
â”‚                 â”‚                  â”‚ Worker          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚ Durable Object  â”‚
                                     â”‚ (HotPotTable)   â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚ Durable Object  â”‚
                                     â”‚ Storage         â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. Cloudflare Worker (worker.js)
- å¤„ç† HTTP è¯·æ±‚å’Œ WebSocket å‡çº§
- æ ¹æ® tableId è·¯ç”±åˆ°å¯¹åº”çš„ Durable Object
- æä¾›é™æ€æ–‡ä»¶æœåŠ¡

#### 2. Durable Object (HotPotTable.js)
- ç®¡ç†å•ä¸ªç«é”…æ¡Œçš„æ‰€æœ‰çŠ¶æ€
- å¤„ç† WebSocket è¿æ¥å’Œæ¶ˆæ¯
- å®ç°æ¸¸æˆé€»è¾‘ï¼ˆåŠ èœã€æ¶®ç…®ã€æèœï¼‰
- çŠ¶æ€æŒä¹…åŒ–åˆ° Durable Object Storage

#### 3. å‰ç«¯ç»„ä»¶
- **HotPotGame**: ä¸»æ¸¸æˆç»„ä»¶ï¼Œç®¡ç†è¿æ¥å’ŒçŠ¶æ€
- **HotPotTable**: ç«é”…æ¡Œåœºæ™¯ï¼Œæ˜¾ç¤ºé”…å’Œåº§ä½
- **DishMenu**: èœå•ç»„ä»¶ï¼Œæ”¯æŒåˆ†ç±»æµè§ˆå’Œé”…åº•é€‰æ‹©

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- Cloudflare è´¦æˆ·
- Wrangler CLI

### å®‰è£…éƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd hotpot-game
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install -g wrangler
```

3. **ç™»å½• Cloudflare**
```bash
wrangler login
```

4. **å¼€å‘æ¨¡å¼**
```bash
npm run dev
```

5. **éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ**
```bash
npm run deploy
```

### å¯ç”¨å‘½ä»¤

```bash
npm run dev              # æœ¬åœ°å¼€å‘
npm run deploy           # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
npm run deploy:staging   # éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
npm run tail             # æŸ¥çœ‹å®æ—¶æ—¥å¿—
```

## ğŸ® æ¸¸æˆç©æ³•

### åŸºæœ¬æµç¨‹
1. **åŠ å…¥æ¸¸æˆ**: è¾“å…¥æ˜µç§°å’Œæ¡Œå­ID
2. **é€‰æ‹©åº§ä½**: è‡ªåŠ¨åˆ†é…ç©ºé—²åº§ä½
3. **ç‚¹å‡»ç«é”…**: æ‰“å¼€èœå•é€‰æ‹©èœå“
4. **é€‰æ‹©é”…åº•**: éº»è¾£é”…æˆ–æ¸…æ±¤é”…
5. **ä¸‹èœæ¶®ç…®**: èœå“ä¼šæ ¹æ®çƒ¹é¥ªæ—¶é—´å˜åŒ–
6. **æèœäº«ç”¨**: çƒ¹é¥ªå®Œæˆåç‚¹å‡»æèµ·
7. **ç¤¾äº¤äº’åŠ¨**: ä½¿ç”¨å¿«æ·å–Šè¯ä¸å…¶ä»–ç©å®¶äº¤æµ

### èœå“åˆ†ç±»
- **é•‡åº—ä¹‹å®**: æ¯›è‚šã€é¸­è‚ ã€é»„å–‰ã€å«©ç‰›è‚‰
- **è¤èœ**: è‚¥ç‰›å·ã€ç¾Šè‚‰å·ã€è™¾æ»‘ã€é±¼è±†è…ç­‰
- **ç´ èœ**: åœŸè±†ç‰‡ã€è²è—•ç‰‡ã€å¨ƒå¨ƒèœã€é‡‘é’ˆè‡ç­‰
- **ä¸¸å­ç±»**: ç‰›è‚‰ä¸¸ã€é±¼ä¸¸ã€å¢¨é±¼ä¸¸ã€è™¾ä¸¸ç­‰
- **ä¸»é£Ÿ**: å®½ç²‰ã€æ–¹ä¾¿é¢ã€å¹´ç³•ã€ç±³çº¿ç­‰
- **è±†åˆ¶å“**: å«©è±†è…ã€å†»è±†è…ã€åƒå¼ ã€è…ç«¹ç­‰

### ç‰¹è‰²åŠŸèƒ½
- **çƒ¹é¥ªæ—¶é—´**: æ¯ç§èœå“éƒ½æœ‰çœŸå®çš„çƒ¹é¥ªæ—¶é—´
- **é”…åº•é€‰æ‹©**: æ”¯æŒéº»è¾£é”…å’Œæ¸…æ±¤é”…
- **å®æ—¶åŠ¨ç”»**: èœå“åœ¨é”…ä¸­çš„æµ®åŠ¨å’Œå˜è‰²æ•ˆæœ
- **é‡åº†è¯**: å·´é€‚å¾—å¾ˆã€å®‰é€¸ã€é›„èµ·ç­‰åœ°é“è¡¨è¾¾

## ğŸ“ é¡¹ç›®ç»“æ„

```
hotpot-game/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ worker.js          # Cloudflare Worker ä¸»å…¥å£
â”‚   â”œâ”€â”€ HotPotTable.js     # Durable Object æ¸¸æˆé€»è¾‘
â”‚   â”œâ”€â”€ data.js            # èœå“å’Œæ¶ˆæ¯æ•°æ®
â”‚   â””â”€â”€ styles.css         # æ ·å¼æ–‡ä»¶ï¼ˆå·²å†…è”åˆ° worker.jsï¼‰
â”œâ”€â”€ wrangler.toml          # Cloudflare é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ é…ç½®è¯´æ˜

### wrangler.toml
```toml
name = "hotpot-game"
main = "src/worker.js"
compatibility_date = "2024-01-01"

[durable_objects]
bindings = [
  { name = "HOTPOT_TABLE", class_name = "HotPotTable" }
]
```

### ç¯å¢ƒå˜é‡
- ç”Ÿäº§ç¯å¢ƒ: `hotpot-game-prod`
- æµ‹è¯•ç¯å¢ƒ: `hotpot-game-staging`

## ğŸŒ è®¿é—®æ–¹å¼

éƒ¨ç½²æˆåŠŸåï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š

- **ä¸»é¡µ**: `https://your-worker.your-subdomain.workers.dev/`
- **æŒ‡å®šæ¡Œå­**: `https://your-worker.your-subdomain.workers.dev/table/table1`
- **APIçŠ¶æ€**: `https://your-worker.your-subdomain.workers.dev/api/tables`

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§å®ç°

### å®æ—¶åŒæ­¥
- ä½¿ç”¨ WebSocket å®ç°ä½å»¶è¿Ÿé€šä¿¡
- Durable Object ç¡®ä¿çŠ¶æ€ä¸€è‡´æ€§
- å¹¿æ’­æœºåˆ¶åŒæ­¥æ‰€æœ‰ç©å®¶çŠ¶æ€

### çŠ¶æ€æŒä¹…åŒ–
- Durable Object Storage æä¾›äº‹åŠ¡æ€§å­˜å‚¨
- æ¸¸æˆçŠ¶æ€åœ¨å¯¹è±¡ä¼‘çœ åä»ç„¶ä¿æŒ
- æ”¯æŒç©å®¶æ–­çº¿é‡è¿

### æ€§èƒ½ä¼˜åŒ–
- Cloudflare Edge Network å…¨çƒåˆ†å‘
- Durable Object å°±è¿‘éƒ¨ç½²
- å‰ç«¯ç»„ä»¶æ‡’åŠ è½½å’Œç¼“å­˜

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘è§„èŒƒ
- ä½¿ç”¨ ES6+ è¯­æ³•
- éµå¾ª Vue 3 Composition API æœ€ä½³å®è·µ
- ä¿æŒä»£ç ç®€æ´å’Œæ³¨é‡Šå®Œæ•´

### æäº¤è§„èŒƒ
- feat: æ–°åŠŸèƒ½
- fix: ä¿®å¤é—®é¢˜
- docs: æ–‡æ¡£æ›´æ–°
- style: æ ·å¼è°ƒæ•´
- refactor: ä»£ç é‡æ„

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- Cloudflare Workers å’Œ Durable Objects æŠ€æœ¯æ”¯æŒ
- Vue.js å‰ç«¯æ¡†æ¶
- é‡åº†ç«é”…æ–‡åŒ–çµæ„Ÿ

---

**äº«å—ä½ çš„ç«é”…æ—¶å…‰ï¼ğŸ”¥ğŸ¥¢**